{% if apache2_global_server_status is defined %}
<IfModule mod_status.c>
	# Allow server status reports generated by mod_status,
	# with the URL of http://servername/server-status
	# Uncomment and change the "192.0.2.0/24" to allow access from other hosts.

	<Location {% if apache2_global_server_status['status_uri'] is defined %}{{ apache2_global_server_status['status_uri'] }}{% else %}/server-status{% endif %}>
		SetHandler server-status
		{% if apache2_global_server_status['status_acls'] is not defined %}
		Require local
		{% else %}
		{% for status_acl in apache2_global_server_status['status_acls'] %}
		Require {{ status_acl }}
		{% endfor %}
		{% endif %}
		#Require ip 192.0.2.0/24
	</Location>

	# Keep track of extended status information for each request
	ExtendedStatus {% if apache2_global_server_status['extended_status'] is defined %}{{ apache2_global_server_status['extended_status'] }}{% else %}On{% endif %}

	# Determine if mod_status displays the first 63 characters of a request or
	# the last 63, assuming the request itself is greater than 63 chars.
	# Default: Off
	#SeeRequestTail On


	<IfModule mod_proxy.c>
		# Show Proxy LoadBalancer status in mod_status
		ProxyStatus {% if apache2_global_server_status['proxy_status'] is defined %}{{ apache2_global_server_status['proxy_status'] }}{% else %}On{% endif %}
	</IfModule>

</IfModule>
{% endif %}
# vim: syntax=apache
