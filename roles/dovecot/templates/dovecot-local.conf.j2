mail_location = sdbox:~/mail
mail_server_admin = mailto:{{ central_local_email }}
# generated 2022-12-25, Mozilla Guideline v5.6, Dovecot 2.3.13, OpenSSL 1.1.1n, intermediate configuration
# https://ssl-config.mozilla.org/#server=dovecot&version=2.3.13&config=intermediate&openssl=1.1.1n&guideline=5.6
ssl = required
ssl_cert = <{{ host_public_cert_cert_file }}
ssl_cipher_list = ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384
ssl_client_ca_file = {{ env_conn_admin[envname]['private_ca_cert_file'] }}
ssl_client_cert = <{{ host_private_client_cert_cert_file }}
ssl_client_key = <{{ host_private_client_cert_key_file }}
ssl_key = <{{ host_public_cert_key_file }}
# intermediate configuration
ssl_min_protocol = TLSv1.2
ssl_prefer_server_ciphers = no
# For Dovecot acting as client (e.g. submission)
imap_client_workarounds = tb-extra-mailbox-sep tb-lsub-flags
{# TODO: Add once smtp01 is configured
submission_max_recipients = 20
submission_relay_host = {{ submission_relay_host }}
submission_relay_port = {{ submission_relay_port }}
submission_relay_trusted = yes
submission_relay_ssl = starttls
#}
local 0.0.0.0 {
	protocol lmtp {
		ssl_cert = <{{ host_private_cert_cert_file }}
		ssl_key = <{{ host_private_cert_key_file }}
	}
}
local :: {
	protocol lmtp {
		ssl_cert = <{{ host_private_cert_cert_file }}
		ssl_key = <{{ host_private_cert_key_file }}
	}
}
